{"ast":null,"code":"var _jsxFileName = \"/mnt/d/react&bac/genral-blog/frontend/src/pages/create-post/createPost.jsx\";\nimport React, { useState } from \"react\";\nimport EditorComponent from \"../../components/editor/editor\";\nimport { EditorState, convertToRaw, convertFromHTML } from 'draft-js';\nimport draftToHtml from 'draftjs-to-html';\nimport axios from \"axios\";\nimport \"./create-post.scss\";\nimport { connect } from \"react-redux\";\nimport { tokenSelector } from \"../../redux/auth/auth.selector\";\nimport { addPost } from \"../../redux/posts/post.action\";\n\nfunction CreatePost({\n  token,\n  dispatch\n}) {\n  const [editorState, updateeditorState] = useState();\n  const [postForm, updatePostForm] = useState({\n    title: \"\",\n    content: \"\"\n  });\n\n  const onEditorStateChange = EditorState => {\n    const rawContentState = convertToRaw(EditorState.getCurrentContent());\n    updateeditorState(JSON.stringify(rawContentState).replace(\"\"));\n  };\n\n  const {\n    title,\n    content\n  } = postForm;\n\n  const formOnChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    updatePostForm(preval => {\n      return { ...preval,\n        [name]: value\n      };\n    });\n  };\n\n  const formOnSubmit = event => {\n    event.preventDefault();\n    const query = `mutation{\n            createPost(title:\"${title}\" content:\"${editorState}\" ){\n                _id\n                title\n                content\n                date\n                relatedComment{\n                  commentContent\n                  commentCreator{\n                    displayName\n                  }\n                }\n                postCreator{\n                  displayName\n                }\n              \n              \n            }\n          }`;\n    axios({\n      url: \"http://localhost:5000/graphql\",\n      method: \"POST\",\n      data: {\n        query: query\n      },\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      }\n    }).then(res => {\n      console.log(res);\n      dispatch(addPost(res.data.data.createPost));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"create_post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"create_post_form\",\n    onSubmit: formOnSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, \" title \"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: title,\n    name: \"title\",\n    onChange: formOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, \" post content \"), /*#__PURE__*/React.createElement(\"textarea\", {\n    name: \"content\",\n    value: content,\n    id: \"\",\n    cols: \"30\",\n    rows: \"10\",\n    onChange: formOnChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(EditorComponent, {\n    className: \"editor\",\n    onEditorStateChange: onEditorStateChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Add post\"))));\n}\n\nconst mapStateToProps = (state, ownprops) => ({\n  token: tokenSelector(state)\n});\n\nexport default connect(mapStateToProps)(CreatePost);","map":{"version":3,"sources":["/mnt/d/react&bac/genral-blog/frontend/src/pages/create-post/createPost.jsx"],"names":["React","useState","EditorComponent","EditorState","convertToRaw","convertFromHTML","draftToHtml","axios","connect","tokenSelector","addPost","CreatePost","token","dispatch","editorState","updateeditorState","postForm","updatePostForm","title","content","onEditorStateChange","rawContentState","getCurrentContent","JSON","stringify","replace","formOnChange","event","name","value","target","preval","formOnSubmit","preventDefault","query","url","method","data","headers","Authorization","then","res","console","log","createPost","catch","err","mapStateToProps","state","ownprops"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport EditorComponent from \"../../components/editor/editor\";\nimport { EditorState , convertToRaw  , convertFromHTML  } from 'draft-js';\nimport draftToHtml from 'draftjs-to-html';\nimport axios from \"axios\"\nimport \"./create-post.scss\";\nimport { connect } from \"react-redux\";\nimport { tokenSelector } from \"../../redux/auth/auth.selector\";\nimport { addPost } from \"../../redux/posts/post.action\";\nfunction CreatePost({token , dispatch}) {\n  const [editorState, updateeditorState] = useState();\n    const [postForm ,updatePostForm ] = useState({title:\"\", content:\"\"})\n    const onEditorStateChange = (EditorState=>{\n        const rawContentState = convertToRaw(EditorState.getCurrentContent());     \n        updateeditorState(JSON.stringify(rawContentState).replace(\"\") )\n        \n      })\n\n    const { title ,content  } = postForm\n    const formOnChange = (event)=>{\n        const { name , value}= event.target\n        updatePostForm(preval =>{\n            return {...preval , [name] : value}\n        })\n    }\n    const formOnSubmit = (event)=>{\n      \n        event.preventDefault()\n        const query = `mutation{\n            createPost(title:\"${title}\" content:\"${editorState}\" ){\n                _id\n                title\n                content\n                date\n                relatedComment{\n                  commentContent\n                  commentCreator{\n                    displayName\n                  }\n                }\n                postCreator{\n                  displayName\n                }\n              \n              \n            }\n          }`;\n          axios({\n            url: \"http://localhost:5000/graphql\",\n            method: \"POST\",\n            data: {\n              query: query,\n            },\n            headers: {\n              \"Content-Type\": \"application/json\",\n              Authorization: \"Bearer \" + token,\n            },\n          })\n            .then((res) => {\n              console.log(res);\n              dispatch(addPost(res.data.data.createPost))\n            })\n            .catch((err) => {\n                console.log(err);\n            });\n\n    }\n  return (\n    <div className=\"create_post\">\n      <div className=\"container\">\n        <form className=\"create_post_form\" onSubmit={formOnSubmit} > \n          <label htmlFor=\"title\"> title </label>\n          <input type=\"text\" value={title} name=\"title\"  onChange={formOnChange} />\n          <label htmlFor=\"title\"> post content </label>\n          <textarea name=\"content\" value={content} id=\"\" cols=\"30\" rows=\"10\" onChange={formOnChange} ></textarea>\n          <EditorComponent\n            className=\"editor\"\n            onEditorStateChange={onEditorStateChange}\n          />\n          <button>Add post</button>\n        </form>\n      </div>\n    </div>\n  );\n}\nconst mapStateToProps = (state, ownprops) => ({\n    token: tokenSelector(state),\n  });\nexport default connect(mapStateToProps)( CreatePost);\n"]},"metadata":{},"sourceType":"module"}